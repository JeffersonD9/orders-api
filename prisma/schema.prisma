generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model inventory {
  id                Int             @id @default(autoincrement())
  inventory_site_id Int
  product_id        Int
  before_qty        Int
  current_qty       Int
  updated_at        DateTime?       @default(now()) @db.Timestamp(6)
  products          products        @relation(fields: [product_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_inventory_product")
  inventory_sites   inventory_sites @relation(fields: [inventory_site_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_inventory_site")

  @@unique([inventory_site_id, product_id], map: "uq_inventory_site_product")
}

model inventory_sites {
  id         Int         @id @default(autoincrement())
  name       String
  location   String?
  created_at DateTime?   @default(now()) @db.Timestamp(6)
  inventory  inventory[]
}

model order_details {
  id         Int    @id @default(autoincrement())
  order_id   Int
  product_id Int
  qty        Int
  orders     orders @relation(fields: [order_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_order")
}

model orders {
  id            Int             @id @default(autoincrement())
  qty           Int
  total         Decimal         @db.Decimal(12, 2)
  date_created  DateTime        @default(now()) @db.Timestamp(6)
  ship_to       String
  end_date      DateTime?       @db.Timestamp(6)
  order_details order_details[]
}

model products {
  id          Int         @id @default(autoincrement())
  name        String
  description String?
  created_at  DateTime?   @default(now()) @db.Timestamp(6)
  inventory   inventory[]
}
